-----------------------------------------------------------------
-- SQL Code Generation
-- Entity: Reviewer Roles
-- Item: spUpdateReviewerRole
-- Generated: 11/19/2024, 3:57:04 PM
--
-- This was generated by the MemberJunction CodeGen tool.
-- This file should NOT be edited by hand.
-----------------------------------------------------------------

------------------------------------------------------------
----- UPDATE PROCEDURE FOR ReviewerRole
------------------------------------------------------------
DROP PROCEDURE IF EXISTS [abstracts].[spUpdateReviewerRole]
GO

CREATE PROCEDURE [abstracts].[spUpdateReviewerRole]
    @ID uniqueidentifier,
    @Name nvarchar(100),
    @SubmissionTypeID uniqueidentifier,
    @Description nvarchar(255)
AS
BEGIN
    SET NOCOUNT ON;
    UPDATE
        [abstracts].[ReviewerRole]
    SET
        [Name] = @Name,
        [SubmissionTypeID] = @SubmissionTypeID,
        [Description] = @Description
    WHERE
        [ID] = @ID

    -- return the updated record so the caller can see the updated values and any calculated fields
    SELECT
                                        *
                                    FROM
                                        [abstracts].[vwReviewerRoles]
                                    WHERE
                                        [ID] = @ID
                                    
END
GO

GRANT EXECUTE ON [abstracts].[spUpdateReviewerRole] TO [cdp_Integration], [cdp_Developer]
GO

------------------------------------------------------------
----- TRIGGER FOR __mj_UpdatedAt field for the ReviewerRole table
------------------------------------------------------------
DROP TRIGGER IF EXISTS [abstracts].trgUpdateReviewerRole
GO
CREATE TRIGGER [abstracts].trgUpdateReviewerRole
ON [abstracts].[ReviewerRole]
AFTER UPDATE
AS
BEGIN
    SET NOCOUNT ON;
    UPDATE
        [abstracts].[ReviewerRole]
    SET
        __mj_UpdatedAt = GETUTCDATE()
    FROM
        [abstracts].[ReviewerRole] AS _organicTable
    INNER JOIN
        INSERTED AS I ON
        _organicTable.[ID] = I.[ID];
END;
GO
        